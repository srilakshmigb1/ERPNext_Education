import{r as d,l as C,a3 as E,D as c,s as f,v as g,x as P,y as r,z as h,L as R,P as $,a4 as D,R as S}from"./frappe-ui.cf491ab7.js";import{s as N}from"./index.0b39e323.js";import{a as v}from"./index.a4fc5f9a.js";import{_ as j}from"./MissingData.98235847.js";const I={key:0},L={class:"px-5 py-4"},O={key:1},q={__name:"Grades",setup(V){const{getCurrentProgram:b,getStudentInfo:k}=N();let p=k().value,y=b().value;const _=d([]),u=d(""),l=d({columns:[{label:"Course",key:"course"},{label:"Batch",key:"batch"}],rows:[]});C({url:"education.education.api.get_student_programs",makeParams(){return{student:p.name}},onSuccess:o=>{let e=[];o.forEach(s=>{e.push({label:s.program,onClick:()=>u.value=s.program})}),u.value=e[e.length-1].label,_.value=e},auto:!0});const w=E({doctype:"Assessment Result",fields:["name","student_group","course","assessment_group","total_score","maximum_score","grade"],filters:{student:p.name,program:y.program},transform:()=>{},onSuccess:o=>{let e=v(o,a=>a.assessment_group),s=Object.keys(e);x(s);let t=v(o,a=>a.course);Object.keys(t).forEach(a=>{let n={};n.course=a,n.batch=t[a][0].student_group,s.forEach(i=>{let m=e[i].find(B=>B.course===a);n[i]=m?`${m.total_score}/${m.maximum_score}`:"-"}),l.value.rows.push(n)})},auto:!0}),x=o=>{o.forEach(e=>{let s={};s.label=e,s.key=e,l.value.columns.push(s)})};return(o,e)=>{var t;const s=S("Button");return((t=c(w).data)==null?void 0:t.length)>0?(f(),g("div",I,[P("div",L,[r(c($),{class:"mb-4",options:_.value},{default:h(({open:a})=>[r(s,{label:u.value},{suffix:h(()=>[r(c(R),{name:a?"chevron-up":"chevron-down",class:"h-4 text-gray-600"},null,8,["name"])]),_:2},1032,["label"])]),_:1},8,["options"]),r(c(D),{class:"h-[250px]",columns:l.value.columns,rows:l.value.rows,options:{selectable:!1,showTooltip:!1,onRowClick:()=>{}},"row-key":"id"},null,8,["columns","rows"])])])):(f(),g("div",O,[r(j,{message:"No grades found"})]))}}};export{q as default};
