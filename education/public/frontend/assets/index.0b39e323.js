var Re=Object.defineProperty,Ie=Object.defineProperties;var De=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var ae=(e,o,s)=>o in e?Re(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s,z=(e,o)=>{for(var s in o||(o={}))re.call(o,s)&&ae(e,s,o[s]);if(G)for(var s of G(o))le.call(o,s)&&ae(e,s,o[s]);return e},Y=(e,o)=>Ie(e,De(o));var ce=(e,o)=>{var s={};for(var t in e)re.call(e,t)&&o.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&G)for(var t of G(e))o.indexOf(t)<0&&le.call(e,t)&&(s[t]=e[t]);return s};var ie=(e,o,s)=>new Promise((t,n)=>{var a=i=>{try{r(s.next(i))}catch(h){n(h)}},l=i=>{try{r(s.throw(i))}catch(h){n(h)}},r=i=>i.done?t(i.value):Promise.resolve(i.value).then(a,l);r((s=s.apply(e,o)).next())});import{e as he,r as S,m as pe,i as Be,h as Ve,a as _e,t as me,b as R,c as ee,d as Me,w as Oe,f as Ne,g as Fe,o as Ue,n as Ge,j as ze,k as q,l as O,p as He,q as We,_ as H,u as ge,s as p,v as b,x as c,y as _,z as T,A as qe,B as N,C as Te,D as u,T as Je,E as C,F as x,G as ue,H as ye,I as F,J as Z,K as ve,L as xe,M as Ke,N as Ye,O as Ze,P as Qe,Q as Xe,R as et,S as tt,U as st,V as ot,W as nt,X as at,Y as rt,Z as lt,$ as ct,a0 as it}from"./frappe-ui.cf491ab7.js";const ut=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}};ut();/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let be;const J=e=>be=e,we=Symbol();function Q(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var M;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(M||(M={}));function dt(){const e=he(!0),o=e.run(()=>S({}));let s=[],t=[];const n=pe({install(a){J(n),n._a=a,a.provide(we,n),a.config.globalProperties.$pinia=n,t.forEach(l=>s.push(l)),t=[]},use(a){return!this._a&&!Be?t.push(a):s.push(a),this},_p:s,_a:null,_e:e,_s:new Map,state:o});return n}const ke=()=>{};function de(e,o,s,t=ke){e.push(o);const n=()=>{const a=e.indexOf(o);a>-1&&(e.splice(a,1),t())};return!s&&Fe()&&Ue(n),n}function A(e,...o){e.slice().forEach(s=>{s(...o)})}const ft=e=>e();function X(e,o){e instanceof Map&&o instanceof Map&&o.forEach((s,t)=>e.set(t,s)),e instanceof Set&&o instanceof Set&&o.forEach(e.add,e);for(const s in o){if(!o.hasOwnProperty(s))continue;const t=o[s],n=e[s];Q(n)&&Q(t)&&e.hasOwnProperty(s)&&!R(t)&&!ee(t)?e[s]=X(n,t):e[s]=t}return e}const ht=Symbol();function pt(e){return!Q(e)||!e.hasOwnProperty(ht)}const{assign:k}=Object;function _t(e){return!!(R(e)&&e.effect)}function mt(e,o,s,t){const{state:n,actions:a,getters:l}=o,r=s.state.value[e];let i;function h(){r||(s.state.value[e]=n?n():{});const m=ze(s.state.value[e]);return k(m,a,Object.keys(l||{}).reduce((w,$)=>(w[$]=pe(q(()=>{J(s);const E=s._s.get(e);return l[$].call(E,E)})),w),{}))}return i=Se(e,h,o,s,t,!0),i}function Se(e,o,s={},t,n,a){let l;const r=k({actions:{}},s),i={deep:!0};let h,m,w=[],$=[],E;const j=t.state.value[e];!a&&!j&&(t.state.value[e]={}),S({});let oe;function ne(f){let d;h=m=!1,typeof f=="function"?(f(t.state.value[e]),d={type:M.patchFunction,storeId:e,events:E}):(X(t.state.value[e],f),d={type:M.patchObject,payload:f,storeId:e,events:E});const v=oe=Symbol();Ge().then(()=>{oe===v&&(h=!0)}),m=!0,A(w,d,t.state.value[e])}const Pe=a?function(){const{state:d}=s,v=d?d():{};this.$patch(P=>{k(P,v)})}:ke;function Le(){l.stop(),w=[],$=[],t._s.delete(e)}function $e(f,d){return function(){J(t);const v=Array.from(arguments),P=[],B=[];function je(g){P.push(g)}function Ae(g){B.push(g)}A($,{args:v,name:f,store:y,after:je,onError:Ae});let V;try{V=d.apply(this&&this.$id===e?this:y,v)}catch(g){throw A(B,g),g}return V instanceof Promise?V.then(g=>(A(P,g),g)).catch(g=>(A(B,g),Promise.reject(g))):(A(P,V),V)}}const Ee={_p:t,$id:e,$onAction:de.bind(null,$),$patch:ne,$reset:Pe,$subscribe(f,d={}){const v=de(w,f,d.detached,()=>P()),P=l.run(()=>Oe(()=>t.state.value[e],B=>{(d.flush==="sync"?m:h)&&f({storeId:e,type:M.direct,events:E},B)},k({},i,d)));return v},$dispose:Le},y=Ne(Ee);t._s.set(e,y);const D=(t._a&&t._a.runWithContext||ft)(()=>t._e.run(()=>(l=he()).run(o)));for(const f in D){const d=D[f];if(R(d)&&!_t(d)||ee(d))a||(j&&pt(d)&&(R(d)?d.value=j[f]:X(d,j[f])),t.state.value[e][f]=d);else if(typeof d=="function"){const v=$e(f,d);D[f]=v,r.actions[f]=d}}return k(y,D),k(me(y),D),Object.defineProperty(y,"$state",{get:()=>t.state.value[e],set:f=>{ne(d=>{k(d,f)})}}),t._p.forEach(f=>{k(y,l.run(()=>f({store:y,app:t._a,pinia:t,options:r})))}),j&&a&&s.hydrate&&s.hydrate(y.$state,j),h=!0,m=!0,y}function K(e,o,s){let t,n;const a=typeof o=="function";typeof e=="string"?(t=e,n=a?s:o):(n=e,t=e.id);function l(r,i){const h=Ve();return r=r||(h?_e(we,null):null),r&&J(r),r=be,r._s.has(t)||(a?Se(t,o,n,r):mt(t,n,r)),r._s.get(t)}return l.$id=t,l}function is(e){{e=me(e);const o={};for(const s in e){const t=e[s];(R(t)||ee(t))&&(o[s]=Me(e,s))}return o}}const te=K("education-users",()=>({user:O({url:"education.education.api.get_user_info",cache:"User",initialData:[],onError(o){console.log(o),console.log(o.exc_type),o&&o.exc_type==="AuthenticationError"&&U.push("/login")}})})),se=K("education-student",()=>{const e=S({}),o=S({}),s=S([]),t=O({url:"education.education.api.get_student_info",onSuccess(r){r||(window.location.href="/app"),o.value=r.current_program,delete r.current_program,s.value=r.student_groups,delete r.student_groups,e.value=r},onError(r){console.error(r)}});function n(){return e}function a(){return o}function l(){return s}return{student:t,studentInfo:e,currentProgram:o,studentGroups:s,getStudentInfo:n,getCurrentProgram:a,getStudentGroups:l}}),Ce=K("education-session",()=>{const{user:e}=te(),{student:o}=se();function s(){let i=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return i==="Guest"&&(i=null),i}let t=S(s());const n=q(()=>!!t.value),a=O({url:"login",onError(){throw new Error("Invalid email or password")},onSuccess(){e.reload(),s.reload(),o.reload(),t.value=s(),a.reset(),U.replace({path:"/"})}}),l=O({url:"logout",onSuccess(){t.value=null,window.location.href="/login"}});return{user:t,isLoggedIn:n,login:a,logout:l}}),gt=[{path:"/schedule",name:"Schedule",component:()=>H(()=>import("./Schedule.d9a6a07c.js"),["assets/Schedule.d9a6a07c.js","assets/Calendar.4edc83dc.js","assets/index.a4fc5f9a.js","assets/frappe-ui.cf491ab7.js","assets/frappe-ui.005832b0.css"])},{path:"/grades",name:"Grades",component:()=>H(()=>import("./Grades.33f5de28.js"),["assets/Grades.33f5de28.js","assets/frappe-ui.cf491ab7.js","assets/frappe-ui.005832b0.css","assets/index.a4fc5f9a.js","assets/MissingData.98235847.js"])},{path:"/fees",name:"Fees",component:()=>H(()=>import("./Fees.af0b4e69.js"),["assets/Fees.af0b4e69.js","assets/frappe-ui.cf491ab7.js","assets/frappe-ui.005832b0.css","assets/index.a4fc5f9a.js","assets/MissingData.98235847.js"])},{path:"/attendance",name:"Attendance",component:()=>H(()=>import("./Attendance.45089c8b.js"),["assets/Attendance.45089c8b.js","assets/frappe-ui.cf491ab7.js","assets/frappe-ui.005832b0.css","assets/Calendar.4edc83dc.js","assets/index.a4fc5f9a.js"])},{path:"/:catchAll(.*)",redirect:"/schedule"}];let U=He({history:We("/student-portal"),routes:gt});U.beforeEach((e,o)=>ie(void 0,null,function*(){const{isLoggedIn:s,user:t}=Ce(),{user:n}=te(),{student:a}=se();if(!s)return window.location.href="/login",yield next(!1);n.data.length===0&&(yield n.reload()),yield a.reload()}));const yt={class:"grid h-5 w-6 flex-shrink-0 place-items-center"},fe={__name:"SidebarLink",props:{icon:{type:Function},label:{type:String,default:""},to:{type:String,default:""},isCollapsed:{type:Boolean,default:!1}},setup(e){const o=ge(),s=e;function t(){o.push(s.to)}let n=q(()=>o.currentRoute.value.path===s.to);return(a,l)=>(p(),b("button",{class:C(["flex h-7 cursor-pointer items-center rounded text-gray-800 duration-300 ease-in-out focus:outline-none focus:transition-none focus-visible:rounded focus-visible:ring-2 focus-visible:ring-gray-400",u(n)?"bg-white shadow-sm":"hover:bg-gray-100"]),onClick:t},[c("div",{class:C(["flex items-center duration-300 ease-in-out",e.isCollapsed?"p-1":"px-2 py-1"])},[_(u(Je),{text:e.label,placement:"right"},{default:T(()=>[qe(a.$slots,"icon",{},()=>[c("span",yt,[(p(),N(Te(e.icon),{class:"h-4.5 w-4.5 text-gray-700"}))])])]),_:3},8,["text"]),c("span",{class:C(["flex-shrink-0 text-base duration-300 ease-in-out",e.isCollapsed?"ml-0 w-0 overflow-hidden opacity-0":"ml-2 w-auto opacity-100"])},x(e.label),3)],2)],2))}};var W={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};const vt=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),I=(e,o)=>(h,{attrs:r,slots:i})=>{var m=h,{size:s,strokeWidth:t=2,absoluteStrokeWidth:n,color:a}=m,l=ce(m,["size","strokeWidth","absoluteStrokeWidth","color"]);return ue("svg",z(Y(z(Y(z({},W),{width:s||W.width,height:s||W.height,stroke:a||W.stroke,"stroke-width":n?Number(t)*24/Number(s):t}),r),{class:["lucide",`lucide-${vt(e)}`,(r==null?void 0:r.class)||""]}),l),[...o.map(w=>ue(...w)),...i.default?[i.default()]:[]])},xt=I("ArrowLeftToLineIcon",[["path",{d:"M3 19V5",key:"rwsyhb"}],["path",{d:"m13 6-6 6 6 6",key:"1yhaz7"}],["path",{d:"M7 12h14",key:"uoisry"}]]),bt=I("BanknoteIcon",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),wt=I("CalendarCheckIcon",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]),kt=I("GraduationCapIcon",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),St=I("SchoolIcon",[["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M14 22v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v4",key:"cpkuc4"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]),Ct=I("UserCheckIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Pt={class:"text-base"},Lt={class:"flex flex-col gap-4"},$t={class:"flex items-center border-b border-solid border-lightGray pb-4 gap-2"},Et={class:"flex flex-col ml-2 gap-1"},jt={class:"text-lg font-semibold"},At={class:"text-gray-600"},Rt={class:"flex gap-4"},It={key:0,class:"flex items-center"},Dt={class:"w-1/2 text-sm text-gray-600"},Bt={class:"w-1/2 text-gray-900"},Vt={class:"flex items-center"},Mt={class:"w-[32%] text-sm text-gray-600"},Ot={class:"w-full text-gray-900"},Nt={class:"flex items-center bg-gray-50 p-2 text-gray-600 text-sm rounded-md"},Ft={__name:"ProfileModal",setup(e){const{getStudentInfo:o}=se(),s=_e("showProfileDialog"),t=o().value,n=[{section:"section 1",fields:[{label:"Mobile Number",value:t.student_mobile_number},{label:"Joining Date",value:t.joining_date},{label:"Date of Birth",value:t.date_of_birth},{label:"Address",value:[t==null?void 0:t.address_line_1,t==null?void 0:t.address_line_2,t==null?void 0:t.city,t==null?void 0:t.pincode,t==null?void 0:t.state,t==null?void 0:t.country].map(a=>a==null?void 0:a.trim()).filter(Boolean).join(", ")}]},{section:"section 2",fields:[{label:"Blood Group",value:t.blood_group},{label:"Gender",value:t.gender},{label:"Nationality",value:t.nationality}]}];return(a,l)=>(p(),N(u(Ye),{modelValue:u(s),"onUpdate:modelValue":l[0]||(l[0]=r=>R(s)?s.value=r:null),options:{title:"Profile",size:"xl"}},{"body-content":T(()=>[c("div",Pt,[c("div",Lt,[c("div",$t,[_(u(ye),{size:"3xl",class:"h-12 w-12",label:u(t).student_name,image:u(t).image||null},null,8,["label","image"]),c("div",Et,[c("p",jt,x(u(t).student_name),1),c("p",At,x(u(t).student_email_id),1)])]),c("div",null,[c("div",Rt,[(p(),b(F,null,Z(n,r=>c("div",{key:r.section,class:"flex-1 flex flex-col gap-4"},[(p(!0),b(F,null,Z(r.fields,i=>(p(),b("div",{key:i.label},[i.label!=="Address"?(p(),b("div",It,[c("p",Dt,x(i.label)+":\xA0 ",1),c("p",Bt,x(i.value),1)])):ve("",!0)]))),128))])),64))]),c("div",Vt,[c("p",Mt,x(n[0].fields[3].label)+":\xA0 ",1),c("p",Ot,x(n[0].fields[3].value),1)])]),c("div",Nt,[_(u(xe),{name:"info",class:"h-4 mr-2"}),Ke(" In case of any incorrect details, please contact the school admin. ")])])])]),_:1},8,["modelValue"]))}},Ut={class:"w-8 h-8 rounded-full flex items-center justify-center"},Gt={class:"text-base font-medium text-gray-900 leading-none"},zt={class:"mt-1 text-sm text-gray-700 leading-none"},Ht=Object.assign({inheritAttrs:!1},{__name:"UserDropdown",props:{isCollapsed:{type:Boolean,default:!1},educationSettings:{}},setup(e){const{user:o}=te(),{logout:s}=Ce(),t=S(!1);Ze("showProfileDialog",t);const n=[{icon:"user",label:"Profile",onClick:()=>t.value=!0},{icon:"log-out",label:"Log out",onClick:()=>s.submit()}];return(a,l)=>(p(),b(F,null,[_(u(Qe),{options:n,class:"p-2"},{default:T(({open:r})=>{var i,h,m;return[c("button",{class:C(["flex h-12 py-2 items-center rounded-md duration-300 ease-in-out",e.isCollapsed?"px-0 w-auto":r?"bg-white shadow-sm px-2 w-52":"hover:bg-gray-200 px-2 w-52"])},[c("div",Ut,[(i=e.educationSettings)!=null&&i.logo?(p(),N(u(ye),{key:0,image:(h=e.educationSettings)==null?void 0:h.logo,shape:"circle",size:"xl"},null,8,["image"])):(p(),N(u(St),{key:1}))]),c("div",{class:C(["flex flex-1 flex-col text-left duration-300 ease-in-out",e.isCollapsed?"opacity-0 ml-0 w-0 overflow-hidden":"opacity-100 ml-2 w-auto"])},[c("div",Gt,x(((m=e.educationSettings)==null?void 0:m.name)||"Education"),1),c("div",zt,x(u(o).data.full_name),1)],2),c("div",{class:C(["duration-300 ease-in-out",e.isCollapsed?"opacity-0 ml-0 w-0 overflow-hidden":"opacity-100 ml-2 w-auto"])},[_(u(xe),{name:"chevron-down",class:"h-4 w-4 text-gray-600","aria-hidden":"true"})],2)],2)]}),_:1}),_(Ft)],64))}}),Wt={class:"flex flex-col overflow-hidden"},qt={class:"flex flex-col overflow-y-auto"},Tt={class:"grid h-5 w-6 flex-shrink-0 place-items-center"},Jt={__name:"Sidebar",setup(e){const o=[{label:"Schedule",to:"/schedule",icon:wt},{label:"Grades",to:"/grades",icon:kt},{label:"Fees",to:"/fees",icon:bt},{label:"Attendance",to:"/attendance",icon:Ct}],s=Xe("sidebar_is_collapsed",!1),t=O({url:"education.education.api.get_school_abbr_logo",auto:!0});return(n,a)=>(p(),b("div",{class:C(["flex h-full flex-col justify-between transition-all duration-300 ease-in-out",u(s)?"w-12":"w-56"])},[c("div",Wt,[_(Ht,{class:"p-2",isCollapsed:u(s),educationSettings:!u(t).loading&&u(t).data},null,8,["isCollapsed","educationSettings"]),c("div",qt,[(p(),b(F,null,Z(o,l=>_(fe,{label:l.label,to:l.to,isCollapsed:u(s),icon:l.icon,class:"mx-2 my-0.5"},null,8,["label","to","isCollapsed","icon"])),64))])]),_(fe,{label:u(s)?"Expand":"Collapse",isCollapsed:u(s),onClick:a[0]||(a[0]=l=>s.value=!u(s)),class:"m-2"},{icon:T(()=>[c("span",Tt,[_(u(xt),{class:C(["h-4.5 w-4.5 text-gray-700 duration-300 ease-in-out",{"[transform:rotateY(180deg)]":u(s)}])},null,8,["class"])])]),_:1},8,["label","isCollapsed"])],2))}},Kt=K("education-leave",()=>{const e=S(!1);return{isAttendancePage:e,setIsAttendancePage:s=>{e.value=s}}}),Yt={class:"flex justify-between gap-3 items-center px-5 py-2.5 h-12 border-b"},Zt={class:"flex gap-2 items-center cursor-pointer"},Qt={class:"font-medium text-lg text-gray-900"},Xt={class:"flex flex-row gap-2"},es={__name:"Navbar",setup(e){const o=ge(),s=q(()=>o.currentRoute.value.name),{setIsAttendancePage:t}=Kt();return(n,a)=>{const l=et("Button");return p(),b("header",Yt,[c("div",Zt,[c("h3",Qt,x(s.value),1)]),c("div",Xt,[s.value==="Attendance"?(p(),N(l,{key:0,variant:"solid",label:"Apply for Leave",onClick:a[0]||(a[0]=r=>u(t)(!0)),"icon-left":"plus"})):ve("",!0)])])}}},ts={class:"flex h-screen w-screen"},ss={class:"h-full border-r bg-gray-50"},os={class:"flex-1 flex flex-col h-full overflow-auto"},ns={__name:"App",setup(e){return(o,s)=>(p(),b(F,null,[c("div",null,[c("div",ts,[c("div",ss,[_(Jt)]),c("div",os,[_(es),_(u(tt),{class:"flex-1 overflow-auto"})])])]),_(u(st))],64))}};let as=dt(),L=ot(ns);ct("resourceFetcher",it);L.use(as);L.use(U);L.use(nt);L.component("Button",at);L.component("Card",rt);L.component("Input",lt);U.isReady().then(()=>{L.mount("#app")});export{is as a,Kt as l,se as s};
